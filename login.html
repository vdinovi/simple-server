<!DOCTYPE>
<html>
    <head>
        <title>simple-server login page</title>
	<link rel="stylesheet" type="text/css" href="main.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script type="text/javascript">
            function updateTable() {
                var table = "<tr><th>Name</th><th>Email</th></tr>";
                jQuery.ajax({
                    type:"GET",
                    url:'update.php',
                    dataType:'json',
                    success: function(obj) {
                        for (var key in obj) {
                            table += "<tr><th>"+key+"</th><th>"+obj[key]+"</th></tr>";
                        }
                        $("#userTable").html(table); 
                    }
                });
            }
            function clearDatabase() {
                var password = prompt("This operation requires an administrator password.");
                if (password != null) {
                    console.log(password);
                    jQuery.ajax({
                        type:"POST",
                        url:'clear.php',
                        dataType:'text',
                        data: password,
                        success: function (obj) {
                            console.log(obj);
                            updateTable();
                        },
                        error: function(xhr, ajaxOptions, err) {
                            console.log(xhr.responseText);
                            alert(xhr.responseText);
                        }
                    });
                }
            }
        </script>
    </head>
    <body onload="updateTable();">
    	<div id="signin">
		<form action="entry.php" method="post">
			Name:<br>
			<input type="text" name="name"/><br>
			Email:<br>
			<input type="text" name="email"/><br>
			<input type="submit" style="display:inline-block";/>
		</form>		
                <button id="update" onclick="updateTable()">Update</button>
                <button id="clear" onclick="clearDatabase()">Clear</button>
        </div>
        <div style="width:600px">
            <table id="userTable"></table>
        </div>
    </body>
</html>
